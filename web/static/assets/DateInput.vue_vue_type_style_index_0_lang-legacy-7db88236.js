System.register(["./index-legacy-2d6958b4.js","./his_date-legacy-70b43096.js","./validations-legacy-0fc7cb15.js","./emc_event-legacy-58754a45.js","./vue-datepicker-legacy-64b30e6f.js","./common-legacy-0d7df615.js"],(function(e,a){"use strict";var l,u,t,o,n,r,i,d,v,s,m,p,c,y,f,b,g,V,D,h,x,I,j,k,w,_,E,q,F,$,S,U,B,M,z,A;return{setters:[e=>{l=e.d,u=e.r,t=e.h,o=e.a6,n=e.i,r=e.c,i=e.j,d=e.w,v=e.u,s=e.z,m=e.am,p=e.a,c=e.e,y=e.K,f=e.o,b=e.t,g=e.b,V=e.az,D=e.J,h=e.A,x=e.I,I=e.x,j=e.a8,k=e.N,w=e.dB,_=e.dC,E=e.ay},e=>{q=e.d,F=e.c,$=e.k,S=e.t},e=>{U=e.e},e=>{B=e.E,M=e.a},e=>{z=e.K},e=>{A=e.i}],execute:function(){var a=document.createElement("style");a.textContent=".vc-popover-content-wrapper{z-index:1000!important}\n",document.head.appendChild(a);const C={key:0},J={key:1},L={key:2,class:"text-danger"},O={key:3,class:"ion-float-right ion-margin-end checkbox-label"},Y={key:2,style:{display:"flex","justify-content":"flex-start","justify-items":"center"}},N={style:{"margin-top":"0.7rem","flex-grow":"1"}};e("_",l({__name:"DateInput",props:{modelValue:{type:Object,default:()=>({})},form:{type:Object,default:()=>({})},minDate:{type:[String,Function],required:!1},maxDate:{type:[String,Function],required:!1},allowEstimation:{type:Boolean,default:!1},estimationLabel:{type:String,default:"Estimate"}},emits:["update:modelValue","isEstimated"],setup(e,{emit:a}){const l=e,K=a,R=u(!1),T=u(),G=u(l.modelValue.value?q(l.modelValue.value).date():void 0),H=u(l.modelValue.value?q(l.modelValue.value).month()+1:0),P=u(l.modelValue.value?q(l.modelValue.value).year():void 0),Q=u(l.modelValue.value),W=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],X=t((()=>{const e="function"==typeof l.minDate?l.minDate():l.minDate;return A(e)?"":F(e)})),Z=t((()=>{const e="function"==typeof l.maxDate?l.maxDate():l.maxDate;return A(e)?"":F(e)})),ee=t({get:()=>l.modelValue?l.modelValue:{},set:e=>K("update:modelValue",e)}),ae=e=>{var a;ee.value.error=null===(a=U({value:e.target.value}))||void 0===a?void 0:a.join(),ee.value.error||(T.value=parseInt(e.target.value)),le()},le=async()=>{let e="";if(R.value&&T.value)e=$(T.value);else if(G.value||H.value||P.value){const a=`${P.value}-${H.value}-${G.value}`;if(!a.match(/^\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])$/))return ee.value.error="Invalid date";e=F(a)}if(ee.value.required&&!e)return ee.value.error="This field is required";if(X.value&&new Date(e)<new Date(X.value))return ee.value.error=R.value?`Estimated period must be less than or equal to ${q().diff(X.value,"years")} years`:`Date must be after ${S(X.value)}`;if(Z.value&&new Date(e)>new Date(Z.value))return ee.value.error=R.value?"Estimated period must be more than or equal to 0 years":`Date must be before ${S(Z.value)}`;if(ee.value.validation){const a=await ee.value.validation({label:e,value:e},l.form);if(a&&a.length)return ee.value.error+=a.toString()}ee.value.error="",ee.value.value=e};o(Q,(e=>{G.value=q(e).date(),H.value=q(e).month()+1,P.value=q(e).year(),le()}));const ue=()=>{T.value=void 0,G.value=void 0,H.value=0,P.value=void 0,ee.value.error="",Q.value=""};return o((()=>l.modelValue.value),(e=>{G.value=e?q(e).date():void 0,H.value=e?q(e).month()+1:0,P.value=e?q(e).year():void 0,Q.value=e})),o(R,(e=>{ue(),K("isEstimated",e)})),n((()=>B.on(M.ON_CLEAR,ue))),(a,l)=>(f(),r(y,null,[ee.value.label?(f(),i(v(D),{key:0,class:"ion-padding-bottom bold"},{default:d((()=>[R.value?(f(),r("span",C,b(e.estimationLabel),1)):(f(),r("span",J,b(ee.value.label),1)),ee.value.required?(f(),r("span",L," *")):s("",!0),e.allowEstimation?(f(),r("span",O,[g(" Estimate "+b(ee.value.label)+" ",1),c(v(V),{modelValue:R.value,"onUpdate:modelValue":l[0]||(l[0]=e=>R.value=e)},null,8,["modelValue"])])):s("",!0)])),_:1})):s("",!0),R.value?(f(),i(v(h),{key:1,type:"number",class:m(["ion-margin-top",ee.value.error?"box-input-error":"box-input"]),modelValue:T.value,"onUpdate:modelValue":l[1]||(l[1]=e=>T.value=e),placeholder:e.estimationLabel,disabled:ee.value.disabled,min:1,onIonInput:ae,onIonFocus:l[2]||(l[2]=()=>ee.value.error="")},null,8,["class","modelValue","placeholder","disabled"])):(f(),r("div",Y,[p("div",N,[c(v(z),{"auto-apply":"",modelValue:Q.value,"onUpdate:modelValue":l[3]||(l[3]=e=>Q.value=e),teleport:!0,"enable-time-picker":!1,maxDate:Z.value,minDate:X.value},{trigger:d((()=>[c(v(x),null,{default:d((()=>[c(v(I),{icon:v(j)},null,8,["icon"])])),_:1})])),_:1},8,["modelValue","maxDate","minDate"])]),c(v(h),{modelValue:G.value,"onUpdate:modelValue":l[4]||(l[4]=e=>G.value=e),min:1,max:31,class:"ion-margin-top",fill:"outline",style:{"flex-grow":"2"},type:"number",placeholder:"DD",disabled:ee.value.disabled,onIonFocus:l[5]||(l[5]=()=>ee.value.error=""),onIonInput:le,onIonBlur:le},null,8,["modelValue","disabled"]),c(v(_),{modelValue:H.value,"onUpdate:modelValue":l[6]||(l[6]=e=>H.value=e),"aria-label":"Months",interface:"popover",placeholder:"MM",class:"ion-margin-top ion-margin-horizontal",fill:"outline",justify:"end",disabled:ee.value.disabled,onIonFocus:l[7]||(l[7]=()=>ee.value.error=""),onIonInput:le,onIonBlur:le},{default:d((()=>[(f(),r(y,null,k(W,((e,a)=>c(v(w),{value:a+1,key:a},{default:d((()=>[g(b(e),1)])),_:2},1032,["value"]))),64))])),_:1},8,["modelValue","disabled"]),c(v(h),{modelValue:P.value,"onUpdate:modelValue":l[8]||(l[8]=e=>P.value=e),min:1900,class:"ion-margin-top",fill:"outline",style:{"flex-grow":"2"},type:"number",placeholder:"YYYY",disabled:ee.value.disabled,onIonFocus:l[9]||(l[9]=()=>ee.value.error=""),onIonInput:le,onIonBlur:le},null,8,["modelValue","disabled"])])),ee.value.error?(f(),i(v(E),{key:3,color:"danger"},{default:d((()=>[g(b(ee.value.error),1)])),_:1})):s("",!0)],64))}}))}}}));
