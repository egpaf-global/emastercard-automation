!function(){function e(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,r||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}System.register(["./common-legacy-0d7df615.js","./report_service-legacy-1e7510ae.js","./age_groups-legacy-5143fd58.js"],(function(r,t){"use strict";var o,n,a;return{setters:[e=>{o=e.g},e=>{n=e.R},e=>{a=e.A}],execute:function(){const t=r("b",["Died","IIT <3 mo","IIT 3-5 mo","IIT 6+ mo","Transferred out","Refused (Stopped)"]);r("c",{tx_curr:"TX_CURR",symptom_screen_alone:"Symptom Screen (alone)",cxr_screen:"CXR Screen",mwrd_screen:"mWRD Screen",sceen_pos_new:"New on ART/Screen Positive",sceen_neg_new:"New on ART/Screen Negative",sceen_pos_prev:"Already on ART/Screen Positive",sceen_neg_prev:"Already on ART/Screen Negative",started_tb_new:"Started TB RX_New on ART",started_tb_prev:"Started TB RX_Prev on ART"}),r("T",{less_than_three_months:"# of clients on <3 months of ARVs",three_to_five_months:"# of clients on 3 - 5 months of ARVs",greater_than_six_months:"# of clients on >= 6 months of ARVs"}),r("d",{tx_curr:"TX_CURR",ever_diagnosed_htn:"Ever diagnosed with HTN",screened_for_htn:"Screened for HTN",newly_diagnosed_htn:"Newly diagnosed with HTN",controlled_htn:"Controlled HTN"});r("a",class extends n{constructor(){super(),e(this,"reportType",void 0),e(this,"initialize",void 0),this.reportType="pepfar",this.initialize=!0}setReportType(e){this.reportType=e}setInitialize(e){this.initialize=e}async getTxCurrMMDReport(e=!1){const r=await this.getReport(`programs/${this.programId}/reports/tx_curr_mmd`,{definition:this.reportType,rebuild:e});if(!r)return[];const t=this.txMmdReportBuilder(r),o=await this.buildMaternityAgreggateRows(t.F.aggregate);return[...t.F.rows,...t.M.rows,{ageGroup:"All",gender:"M",...t.M.aggregate},...o]}async getTxMlReport(e){const r=await this.getReport("tx_ml",{rebuild:e});if(!r)return[];const t=this.txMlReportBuilder(r),o=await this.buildMaternityAgreggateRows(t.F.aggregate);return[...t.F.rows,...t.M.rows,{ageGroup:"All",gender:"M",...t.M.aggregate},...o]}getTxRttReport(e){return this.getReport("tx_rtt",{rebuild:e})}getClinicTxRtt(e){return this.getReport(`programs/${this.programId}/reports/clinic_tx_rtt`,{rebuild:e})}async getTxTbReport(e){return this.getReport(`programs/${this.programId}/reports/tx_tb`,{rebuild_outcome:e})}getTxNewReport(e){return this.getReport(`programs/${this.programId}/reports/tx_new`,{rebuild:e})}async getTxHivHtnReport(e){const r=await this.getReport(`programs/${this.programId}/reports/tx_hiv_htn`,{rebuild:e}),t=Object.entries(r).reduce(((e,[r,t])=>(/Unknown|All/i.test(r)||(e.M.push({ageGroup:r,gender:"Male",...t.M}),e.F.push({ageGroup:r,gender:"Female",...t.F})),e)),{M:[],F:[]});return[...t.F,...t.M,{ageGroup:"All",gender:"Male",...r.All.Male},{ageGroup:"All",gender:"FP",...r.All.FP},{ageGroup:"All",gender:"FNP",...r.All.FNP},{ageGroup:"All",gender:"FBf",...r.All.FBf}]}mapTxMlIndcators(e){return t.reduce(((r,t,o)=>{var n;return r[t]=null!==(n=e[o])&&void 0!==n?n:[],r}),{})}txMlReportBuilder(e){const r={M:{rows:[],aggregate:{}},F:{rows:[],aggregate:{}}};return a.forEach((t=>{["F","M"].forEach((n=>{const a=this.mapTxMlIndcators(o(e,`${t}.${n}`,[]));r[n].rows.push({ageGroup:t,gender:n,...a}),this.aggregateIndicatorData(r,a,n)}))})),r}aggregateIndicatorData(e,r,t){Object.entries(r).forEach((([r,o])=>{var n;e[t].aggregate[r]=[...o,...null!==(n=e[t].aggregate[r])&&void 0!==n?n:[]]}))}txMmdReportBuilder(e){return Object.keys(e).reduce(((r,t)=>{if(!/Unknown/i.test(t)){const n=o(e,`${t}.Female`);r.F.rows.push({ageGroup:t,gender:"F",...n}),this.aggregateIndicatorData(r,n,"F");const a=o(e,`${t}.Male`);r.M.rows.push({ageGroup:t,gender:"M",...a}),this.aggregateIndicatorData(r,a,"M")}return r}),{M:{rows:[],aggregate:{}},F:{rows:[],aggregate:{}}})}})}}}))}();
