System.register(["./index-legacy-a3ed4133.js","./image-legacy-0b5f9ca9.js","./toasts-legacy-14f1e720.js","./PasswordUpdate-legacy-809be8c3.js","./TextInput-legacy-975c25ba.js","./his_date-legacy-0bc670a8.js","./form-legacy-dec90092.js","./Strs-legacy-eacc8505.js","./common-legacy-0d7df615.js","./loader-legacy-805839f7.js"],(function(e,a){"use strict";var l,t,n,o,r,s,i,d,u,c,g,m,p,f,v,h,y,_,x,w,b,P,j,C,k,z,A,V,E,F,I,R,M,T,U,q,S,D,K;return{setters:[e=>{l=e.d,t=e.r,n=e.f,o=e.g,r=e.h,s=e.i,i=e.j,d=e.w,u=e.u,c=e.k,g=e.o,m=e.e,p=e.l,f=e.m,v=e.n,h=e.p,y=e.b,_=e.q,x=e.t,w=e.a,b=e.s,P=e.v,j=e.x,C=e.I,k=e.y,z=e.z,A=e.c,V=e.A,E=e.B,F=e.C,I=e.D,R=e.E,M=e.F,T=e.G,U=e.H,q=e._},e=>{S=e.r},e=>{D=e.t},e=>{K=e.u},null,null,null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".title[data-v-05c76410]{text-align:center;font-size:68px;font-weight:700;margin:8vh 1px 0}.sub-title[data-v-05c76410]{text-align:center!important;font-size:24px;margin-bottom:20px}.hero-image[data-v-05c76410]{display:block;width:55%;margin:5px auto}.footer-section[data-v-05c76410]{position:absolute;width:100%;bottom:0;left:0;padding-right:1rem;padding-left:1rem}.avatar[data-v-05c76410]{font-size:8vw;margin:10vh 1px 0}.form-section[data-v-05c76410]{background:#2839ad;color:#fff;text-align:center;height:100vh;padding:38px 18px}.brand-logo-pepfar[data-v-05c76410]{width:80px}.brand-logo-moh[data-v-05c76410]{width:90px}\n",document.head.appendChild(a);const B=["src"],G=["src"],H=["src"],L={key:0};e("default",q(l({__name:"login",setup(e){const a=t(""),l=t(""),q=n(),N=K(),{fullVersion:J}=T(),{facility:O,loadFacilityCode:Q,loadCurrentFacility:W}=c(),{initiateIdleTimer:X,stopIdleTimer:Y}=o(),Z=r((()=>q.currentRoute.value.redirectedFrom));s((()=>{Y(),W(!0)}));const $=async()=>{try{if(!a.value||!l.value)return D("Invalid login details");const t=await U.login(a.value,l.value);var e;t.ok?(N.setCurrentPassword(l.value),await N.canChangePassword()&&await N.changePasswaord(),Q(),X(),q.push(null!==(e=Z.value)&&void 0!==e?e:"/")):D(t.errorMessage)}catch(t){D("An error occurred while logging in"),console.error(t)}};return(e,t)=>(g(),i(u(M),null,{default:d((()=>[m(u(R),null,{default:d((()=>[m(u(p),{style:{margin:"0",padding:"0"}},{default:d((()=>[m(u(f),null,{default:d((()=>[m(u(v),{size:"8"},{default:d((()=>[m(u(h),{class:"title"},{default:d((()=>t[2]||(t[2]=[y("E-MASTERCARD APP")]))),_:1}),m(u(_),{class:"sub-title"},{default:d((()=>[y(x(u(J)),1)])),_:1}),w("img",{src:u(S)("report.png"),class:"hero-image"},null,8,B),m(u(b),{class:"footer-section"},{default:d((()=>[m(u(P),null,{default:d((()=>[w("span",null,[w("img",{id:"coat",src:u(S)("login-logos/Malawi-Coat_of_arms_of_arms.png"),alt:"Malawi Coat of Arms logo",class:"brand-logo-moh"},null,8,G),w("img",{id:"pepfar",src:u(S)("login-logos/PEPFAR.png"),alt:"PEPFAR logo",class:"brand-logo-pepfar"},null,8,H)]),m(u(j),{class:"his-sm-text",slot:"end",lines:"none"},{default:d((()=>[m(u(C),{color:"dark",fill:"outline",size:"large",slot:"end","router-link":"/settings/network"},{default:d((()=>t[3]||(t[3]=[y(" Network ")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),m(u(v),{size:"4",class:"form-section"},{default:d((()=>[m(u(k),{icon:u(z),class:"avatar"},null,8,["icon"]),u(O).name?(g(),A("h3",L,x(u(O).name)+" ("+x(u(O).district)+")",1)):V("",!0),t[5]||(t[5]=w("h4",null,"Please, log into your account",-1)),m(u(j),{style:{margin:"2rem 3.5rem"}},{default:d((()=>[m(u(E),{type:"text",placeholder:"Username",modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),onKeyup:F($,["enter"]),min:5,required:""},null,8,["modelValue"])])),_:1}),m(u(j),{style:{margin:"2rem 3.5rem"}},{default:d((()=>[m(u(E),{type:"password",modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=e=>l.value=e),placeholder:"Password",onKeyup:F($,["enter"]),max:100,min:5,required:""},null,8,["modelValue"])])),_:1}),m(u(C),{expand:"full",size:"large",style:{margin:"2rem 3.5rem","text-transform":"none"},onClick:I($,["prevent"])},{default:d((()=>t[4]||(t[4]=[y(" Login ")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}))}}),[["__scopeId","data-v-05c76410"]]))}}}));
