System.register(["./index-legacy-99ff0f8f.js","./image-legacy-0b5f9ca9.js","./toasts-legacy-35496286.js","./PasswordUpdate-legacy-4c307f41.js","./TextInput-legacy-4ada1f95.js","./his_date-legacy-0b8c6185.js","./validations-legacy-0fc7cb15.js","./common-legacy-0d7df615.js","./form-legacy-83ce8344.js","./Strs-legacy-eacc8505.js","./loader-legacy-4400cb30.js"],(function(e,a){"use strict";var l,t,o,n,r,s,i,d,u,c,g,m,f,p,v,h,y,_,w,x,C,b,k,P,j,z,A,F,V,E,I,M,R,T,U,q,K,S,D,B,G;return{setters:[e=>{l=e.d,t=e.r,o=e.f,n=e.g,r=e.h,s=e.i,i=e.j,d=e.w,u=e.u,c=e.k,g=e.o,m=e.e,f=e.l,p=e.m,v=e.n,h=e.p,y=e.b,_=e.q,w=e.t,x=e.a,C=e.s,b=e.v,k=e.x,P=e.I,j=e.y,z=e.z,A=e.c,F=e.A,V=e.B,E=e.C,I=e.D,M=e.E,R=e.F,T=e.G,U=e.H,q=e.J,K=e.K,S=e._},e=>{D=e.r},e=>{B=e.t},e=>{G=e.u},null,null,null,null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".title[data-v-e30111ea]{text-align:center;font-size:68px;font-weight:700;margin:8vh 1px 0}.sub-title[data-v-e30111ea]{text-align:center!important;font-size:24px;margin-bottom:20px}.hero-image[data-v-e30111ea]{display:block;width:55%;margin:5px auto}.footer-section[data-v-e30111ea]{position:absolute;width:100%;bottom:0;left:0;padding-right:1rem;padding-left:1rem}.avatar[data-v-e30111ea]{font-size:8vw;margin:10vh 1px 0}.form-section[data-v-e30111ea]{background:#2839ad;color:#fff;text-align:center;height:100vh;padding:38px 18px}.brand-logo-pepfar[data-v-e30111ea]{width:80px}.brand-logo-moh[data-v-e30111ea]{width:90px}\n",document.head.appendChild(a);const H=["src"],J=["src"],L=["src"],N={key:0};e("default",S(l({__name:"login",setup(e){const a=t(""),l=t(""),S=t(!1),O=o(),Q=G(),{fullVersion:W}=q(),{facility:X,loadFacilityCode:Y,loadCurrentFacility:Z}=c(),{initiateIdleTimer:$,stopIdleTimer:ee}=n(),ae=r((()=>O.currentRoute.value.redirectedFrom));s((()=>{ee(),Z(!0)}));const le=async()=>{try{if(!a.value||!l.value)return B("Invalid login details");const t=await K.login(a.value,l.value);var e;t.ok?(Q.setCurrentPassword(l.value),await Q.canChangePassword()&&await Q.changePassword(),Y(),$(),O.push(null!==(e=ae.value)&&void 0!==e?e:"/")):B(t.errorMessage)}catch(t){B("An error occurred while logging in"),console.error(t)}},te=()=>{S.value=!S.value};return(e,t)=>(g(),i(u(U),null,{default:d((()=>[m(u(T),null,{default:d((()=>[m(u(f),{style:{margin:"0",padding:"0"}},{default:d((()=>[m(u(p),null,{default:d((()=>[m(u(v),{size:"8"},{default:d((()=>[m(u(h),{class:"title"},{default:d((()=>t[2]||(t[2]=[y("E-MASTERCARD APP")]))),_:1}),m(u(_),{class:"sub-title"},{default:d((()=>[y(w(u(W)),1)])),_:1}),x("img",{src:u(D)("report.png"),class:"hero-image"},null,8,H),m(u(C),{class:"footer-section"},{default:d((()=>[m(u(b),null,{default:d((()=>[x("span",null,[x("img",{id:"coat",src:u(D)("login-logos/Malawi-Coat_of_arms_of_arms.png"),alt:"Malawi Coat of Arms logo",class:"brand-logo-moh"},null,8,J),x("img",{id:"pepfar",src:u(D)("login-logos/PEPFAR.png"),alt:"PEPFAR logo",class:"brand-logo-pepfar"},null,8,L)]),m(u(k),{class:"his-sm-text",slot:"end",lines:"none"},{default:d((()=>[m(u(P),{color:"dark",fill:"outline",size:"large",slot:"end","router-link":"/settings/network"},{default:d((()=>t[3]||(t[3]=[y(" Network ")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),m(u(v),{size:"4",class:"form-section"},{default:d((()=>[m(u(j),{icon:u(z),class:"avatar"},null,8,["icon"]),u(X).name?(g(),A("h3",N,w(u(X).name)+" ("+w(u(X).district)+")",1)):F("",!0),t[6]||(t[6]=x("h4",null,"Please, log into your account",-1)),m(u(k),{style:{margin:"2rem 3.5rem"}},{default:d((()=>[m(u(V),{type:"text",placeholder:"Username",modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),onKeyup:E(le,["enter"]),min:5,required:""},null,8,["modelValue"])])),_:1}),m(u(k),{style:{margin:"2rem 3.5rem"}},{default:d((()=>[m(u(V),{type:S.value?"text":"password",modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=e=>l.value=e),placeholder:"Password",onKeyup:E(le,["enter"]),max:100,min:5,required:""},{default:d((()=>[m(u(P),{slot:"end",fill:"clear",onClick:te},{default:d((()=>[m(u(j),{icon:S.value?u(I):u(M)},null,8,["icon"])])),_:1})])),_:1},8,["type","modelValue"])])),_:1}),m(u(P),{expand:"full",size:"large",style:{margin:"2rem 3.5rem","text-transform":"none"},onClick:R(le,["prevent"])},{default:d((()=>t[4]||(t[4]=[y(" Login ")]))),_:1}),m(u(P),{fill:"clear",size:"large",color:"light",class:"ion-text-lowercase",onClick:u(Q).showForgetPasswordModal},{default:d((()=>t[5]||(t[5]=[y(" forget password? ")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}))}}),[["__scopeId","data-v-e30111ea"]]))}}}));
