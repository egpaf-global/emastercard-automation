{"version":3,"sources":["webpack:///./src/apps/OPD/views/reports/moh/IDSR/IDSRWeekly.vue?f94d","webpack:///./src/apps/OPD/views/reports/moh/IDSR/IDSRWeekly.vue","webpack:///./src/apps/OPD/views/reports/moh/IDSR/IDSRWeekly.vue?273b"],"names":["_hoisted_1","id","_hoisted_2","_createElementVNode","render","_ctx","_cache","$props","$setup","$data","$options","_component_ion_loading","_resolveComponent","_component_his_standard_form","_component_idsr_h","_component_weekly","_component_ion_content","_component_his_footer","_component_ion_page","_openBlock","_createElementBlock","_Fragment","_createVNode","isLoading","message","reportReady","_createCommentVNode","_createBlock","key","onOnFinish","onPeriod","skipSummary","fields","default","_withCtx","componentKey","reportName","rangeLabel","range","ref","periodLabel","periodDates","clinicName","totalOPDVisits","TotalOPDVisits","onDrillDown","params","idsr","epiweek","_","btns","defineComponent","mixins","ReportMixinVue","components","IonLoading","IdsrH","Weekly","HisStandardForm","HisFooter","IonPage","IonContent","data","formData","computedFormData","reportID","reportTitle","IDSRReportService","getLocationName","reportUrlParams","regenarate","created","this","getBtns","getEpiweeksFields","methods","form","config","regenerate","report","setRegenerate","setEpiWeek","label","setStartDate","HisDate","toStandardHisFormat","other","start","setEndDate","end","getReportPeriod","split","Service","requestIDSRWeekly","visits","getAttendance","length","error","console","log","name","size","slot","color","visible","onClick","async","rep","$refs","onDownload","exportToCustomPDF","$router","push","path","__exports__"],"mappings":"yIAEA,MAAMA,EAAa,CAAEC,GAAI,kBACnBC,EAA0BC,gCAAoB,MAAO,CAAEF,GAAI,SAAW,MAAO,GAE7E,SAAUG,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,MAAMC,EAAyBC,8BAAkB,eAC3CC,EAA+BD,8BAAkB,qBACjDE,EAAoBF,8BAAkB,UACtCG,EAAoBH,8BAAkB,UACtCI,EAAyBJ,8BAAkB,eAC3CK,EAAwBL,8BAAkB,cAC1CM,EAAsBN,8BAAkB,YAE9C,OAAQO,yBAAcC,gCAAoBC,cAAW,KAAM,CACzDC,yBAAaX,EAAwB,CACnC,UAAWN,EAAKkB,UAChBC,QAAS,kBACR,KAAM,EAAG,CAAC,YACXnB,EAAKoB,YAOHC,gCAAoB,IAAI,IANvBP,yBAAcQ,yBAAad,EAA8B,CACxDe,IAAK,EACLC,WAAYxB,EAAKyB,SACjBC,aAAa,EACbC,OAAQ3B,EAAK2B,QACZ,KAAM,EAAG,CAAC,aAAc,YAE9B3B,EAAKoB,aACDN,yBAAcQ,yBAAaT,EAAqB,CAAEU,IAAK,GAAK,CAC3DK,QAASC,qBAAS,IAAM,CACtBZ,yBAAaN,EAAwB,KAAM,CACzCiB,QAASC,qBAAS,IAAM,CACtB/B,gCAAoB,MAAOH,EAAY,EACpCmB,yBAAcQ,yBAAab,EAAmB,CAC7Cc,IAAKvB,EAAK8B,aACVC,WAAY/B,EAAK+B,WACjBC,WAAYhC,EAAKgC,WACjBC,MAAOjC,EAAKiC,MACZC,IAAK,SACLC,YAAanC,EAAKmC,YAClBC,YAAapC,EAAKoC,YAClBC,WAAYrC,EAAKqC,WACjBC,eAAgBtC,EAAKuC,gBACpB,KAAM,EAAG,CAAC,aAAc,aAAc,QAAS,cAAe,cAAe,aAAc,qBAC7FzB,yBAAcQ,yBAAaZ,EAAmB,CAC7Ca,IAAKvB,EAAK8B,aACVU,YAAaxC,EAAKwC,YAClBC,OAAQzC,EAAK0C,KACbN,YAAapC,EAAKoC,YAClBO,QAAS3C,EAAKiC,MACdC,IAAK,OACJ,KAAM,EAAG,CAAC,cAAe,SAAU,cAAe,iBAGzDU,EAAG,IAEL3B,yBAAaL,EAAuB,CAAEiC,KAAM7C,EAAK6C,MAAQ,KAAM,EAAG,CAAC,WAErED,EAAG,KAELvB,gCAAoB,IAAI,GAC5BxB,GACC,I,0HCjDUiD,+BAAgB,CAC7BC,OAAQ,CAACC,QACTC,WAAY,CAAEC,2BAAYC,aAAOC,cAAQC,uBAAiBC,iBAAWC,qBAASC,4BAC9EC,KAAMA,KAAA,CACJC,SAAU,GACV5B,aAAc,EACd6B,iBAAkB,GAClBjB,KAAM,GACNG,KAAM,GACN3B,WAAW,EACXS,OAAQ,GACRiC,UAAW,EACXzB,YAAa,aACbC,YAAa,GACbL,WAAY,qCACZC,WAAY,cACZ6B,YAAa,GACb5B,MAAO,GACPM,eAAgB,EAChBF,WAAYyB,OAAkBC,kBAC9B3C,aAAa,EACb4C,gBAAiB,GACjBC,WAAY,KAEdC,UACEC,KAAKtB,KAAOsB,KAAKC,UACjBD,KAAKxC,OAASwC,KAAKE,qBAErBC,QAAS,CACP,eAAeC,EAAWC,EAAaC,GAAW,GAChDN,KAAKrC,cAAgB,EACrBqC,KAAKT,SAAWa,EAChBJ,KAAKR,iBAAmBa,EACxBL,KAAK/C,aAAc,EACnB+C,KAAKjD,WAAY,EACjBiD,KAAKO,OAAS,IAAIZ,OAClBK,KAAKO,OAAOC,cAAcF,GAC1BN,KAAKO,OAAOE,WAAWL,EAAK5B,QAAQkC,OACpCV,KAAKO,OAAOI,aAAaC,OAAQC,oBAAoBT,EAAK5B,QAAQsC,MAAMC,QACxEf,KAAKO,OAAOS,WAAWJ,OAAQC,oBAAoBT,EAAK5B,QAAQsC,MAAMG,MACtEjB,KAAK/B,YAAc+B,KAAKO,OAAOW,kBAC/BlB,KAAKlC,MAAQsC,EAAK5B,QAAQkC,MAAMS,MAAM,KAAK,GAC3CnB,KAAKN,YAAc,OAAO0B,OAAQxB,wCAAwCI,KAAK/B,cAC/E,IACE,MAAMM,QAAayB,KAAKO,OAAOc,oBACzBC,QAAetB,KAAKO,OAAOgB,gBAC9BhD,GAAQ+C,IACTtB,KAAKP,SAAW,OAChBO,KAAK5B,eAAiBkD,EAAOE,OAC7BxB,KAAKzB,KAAOA,GAEd,MAAOkD,GACPC,QAAQC,IAAIF,GACZ,QACAzB,KAAKjD,WAAY,IAGrBkD,UACE,MAAQ,CACN,CACE2B,KAAM,MACNC,KAAM,QACNC,KAAM,QACNC,MAAO,UACPC,SAAS,EACTC,QAASC,UACP,MAAMC,EAAMnC,KAAKoC,MAAMD,IACvBA,EAAIE,WAAWrC,KAAKN,eAGxB,CACEkC,KAAM,MACNC,KAAM,QACNC,KAAM,QACNC,MAAO,UACPC,SAAS,EACTC,QAASA,IAAMjC,KAAKsC,kBAAkBtC,KAAKN,cAE7C,CACEkC,KAAM,OACNC,KAAM,QACNC,KAAM,MACNC,MAAO,UACPC,SAAS,EACTC,QAASA,IAAMjC,KAAK/C,aAAc,GAEpC,CACE2E,KAAM,UACNC,KAAM,QACNC,KAAM,MACNC,MAAO,UACPC,SAAS,EACTC,QAASC,eAAkBlC,KAAK1C,SAAS0C,KAAKT,SAAUS,KAAKR,kBAAkB,IAEjF,CACEoC,KAAM,SACNC,KAAM,QACNC,KAAM,MACNC,MAAO,UACPC,SAAS,EACTC,QAASA,IAAMjC,KAAKuC,QAAQC,KAAK,CAAEC,KAAK,Y,qBC5GlD,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAAS9G,KAErD","file":"js/chunk-2d0c8493.e005e67e.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { id: \"report-content\" }\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"div\", { id: \"print\" }, null, -1)\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ion_loading = _resolveComponent(\"ion-loading\")!\n  const _component_his_standard_form = _resolveComponent(\"his-standard-form\")!\n  const _component_idsr_h = _resolveComponent(\"idsr-h\")!\n  const _component_weekly = _resolveComponent(\"weekly\")!\n  const _component_ion_content = _resolveComponent(\"ion-content\")!\n  const _component_his_footer = _resolveComponent(\"his-footer\")!\n  const _component_ion_page = _resolveComponent(\"ion-page\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_ion_loading, {\n      \"is-open\": _ctx.isLoading,\n      message: \"Please wait...\"\n    }, null, 8, [\"is-open\"]),\n    (!_ctx.reportReady)\n      ? (_openBlock(), _createBlock(_component_his_standard_form, {\n          key: 0,\n          onOnFinish: _ctx.onPeriod,\n          skipSummary: true,\n          fields: _ctx.fields\n        }, null, 8, [\"onOnFinish\", \"fields\"]))\n      : _createCommentVNode(\"\", true),\n    (_ctx.reportReady)\n      ? (_openBlock(), _createBlock(_component_ion_page, { key: 1 }, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_content, null, {\n              default: _withCtx(() => [\n                _createElementVNode(\"div\", _hoisted_1, [\n                  (_openBlock(), _createBlock(_component_idsr_h, {\n                    key: _ctx.componentKey,\n                    reportName: _ctx.reportName,\n                    rangeLabel: _ctx.rangeLabel,\n                    range: _ctx.range,\n                    ref: \"header\",\n                    periodLabel: _ctx.periodLabel,\n                    periodDates: _ctx.periodDates,\n                    clinicName: _ctx.clinicName,\n                    totalOPDVisits: _ctx.TotalOPDVisits\n                  }, null, 8, [\"reportName\", \"rangeLabel\", \"range\", \"periodLabel\", \"periodDates\", \"clinicName\", \"totalOPDVisits\"])),\n                  (_openBlock(), _createBlock(_component_weekly, {\n                    key: _ctx.componentKey,\n                    onDrillDown: _ctx.onDrillDown,\n                    params: _ctx.idsr,\n                    periodDates: _ctx.periodDates,\n                    epiweek: _ctx.range,\n                    ref: \"rep\"\n                  }, null, 8, [\"onDrillDown\", \"params\", \"periodDates\", \"epiweek\"]))\n                ])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_his_footer, { btns: _ctx.btns }, null, 8, [\"btns\"])\n          ]),\n          _: 1\n        }))\n      : _createCommentVNode(\"\", true),\n    _hoisted_2\n  ], 64))\n}","\nimport { defineComponent } from \"vue\";\nimport HisFooter from \"@/components/HisDynamicNavFooter.vue\";\nimport { IonPage, IonContent, IonLoading } from \"@ionic/vue\"\nimport { Field } from '@/components/Forms/FieldInterface'\nimport HisStandardForm from \"@/components/Forms/HisStandardForm.vue\";\nimport ReportMixinVue from \"../../ReportMixin.vue\";\nimport { IDSRReportService } from \"@/apps/OPD/services/idsr_service\"\nimport IdsrH from \"@/apps/OPD/views/reports/moh/MOHReportHeader.vue\"\nimport Weekly from \"@/apps/OPD/views/reports/moh/IDSR/IDSRTableTemplate.vue\"\nimport HisDate from \"@/utils/Date\"\nimport { Service } from \"@/services/service\"\n\nexport default defineComponent({\n  mixins: [ReportMixinVue],\n  components: { IonLoading, IdsrH, Weekly, HisStandardForm, HisFooter, IonPage, IonContent },\n  data: () => ({\n    formData: {} as any,\n    componentKey: 0 as number,\n    computedFormData: {} as any,\n    idsr: {} as any,\n    btns: [] as Array<any>,\n    isLoading: false as boolean,\n    fields: [] as Array<Field>,\n    reportID: -1 as any,\n    periodLabel: 'Week Dates',\n    periodDates: '' as string,\n    reportName: 'WEEKLY DISEASE SURVEILLANCE REPORT',\n    rangeLabel: 'Week Number',\n    reportTitle: '',\n    range: '' as string,\n    TotalOPDVisits: 0 as number,\n    clinicName: IDSRReportService.getLocationName(),\n    reportReady: false as boolean,\n    reportUrlParams: '' as string,\n    regenarate: '' as string\n  }),\n  created() {\n    this.btns = this.getBtns()\n    this.fields = this.getEpiweeksFields()\n  },\n  methods: {\n    async onPeriod(form: any, config: any, regenerate=false) {\n      this.componentKey += 1\n      this.formData = form\n      this.computedFormData = config\n      this.reportReady = true \n      this.isLoading = true\n      this.report = new IDSRReportService()\n      this.report.setRegenerate(regenerate)\n      this.report.setEpiWeek(form.epiweek.label)\n      this.report.setStartDate(HisDate.toStandardHisFormat(form.epiweek.other.start))\n      this.report.setEndDate(HisDate.toStandardHisFormat(form.epiweek.other.end))\n      this.periodDates = this.report.getReportPeriod()\n      this.range = form.epiweek.label.split(\" \")[0]\n      this.reportTitle = `MOH ${Service.getLocationName()} Weekly IDSR Report ${this.periodDates}`\n      try {\n        const idsr = await this.report.requestIDSRWeekly()\n        const visits = await this.report.getAttendance()\n        if(idsr && visits) {\n          this.reportID = \"data\"\n          this.TotalOPDVisits = visits.length\n          this.idsr = idsr\n        }\n      } catch (error) {\n        console.log(error)\n      } finally {\n        this.isLoading = false\n      }\n    },\n    getBtns() {\n      return  [\n        {\n          name: \"CSV\",\n          size: \"large\",\n          slot: \"start\",\n          color: \"primary\",\n          visible: true,\n          onClick: async () => {\n            const rep = this.$refs.rep as any\n            rep.onDownload(this.reportTitle)\n          }\n        },\n        {\n          name: \"PDF\",\n          size: \"large\",\n          slot: \"start\",\n          color: \"primary\",\n          visible: true,\n          onClick: () => this.exportToCustomPDF(this.reportTitle)\n        },\n        {\n          name: \"Back\",\n          size: \"large\",\n          slot: \"end\",\n          color: \"warning\",\n          visible: true,\n          onClick: () => this.reportReady = false\n        },\n        {\n          name: \"Refresh\",\n          size: \"large\",\n          slot: \"end\",\n          color: \"warning\",\n          visible: true,\n          onClick: async () => await this.onPeriod(this.formData, this.computedFormData, true)\n        },\n        {\n          name: \"Finish\",\n          size: \"large\",\n          slot: \"end\",\n          color: \"success\",\n          visible: true,\n          onClick: () => this.$router.push({ path:'/' })\n        }\n      ]   \n    }\n  }\n})\n","import { render } from \"./IDSRWeekly.vue?vue&type=template&id=d605a9a2&ts=true\"\nimport script from \"./IDSRWeekly.vue?vue&type=script&lang=ts\"\nexport * from \"./IDSRWeekly.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/projects/malawi-emr/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}