{"version":3,"sources":["webpack:///./src/components/UpdateNotification.vue?cb9e","webpack:///./src/components/UpdateNotification.vue?3441","webpack:///./src/components/UpdateNotification.vue","webpack:///./src/components/UpdateNotification.vue?740b"],"names":["_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","key","id","_hoisted_2","_createElementVNode","_hoisted_3","render","_ctx","_cache","$props","$setup","$data","$options","_component_ion_button","_resolveComponent","hasUpdate","_openBlock","_createElementBlock","_createTextVNode","_toDisplayString","newVersion","_createVNode","onClick","onVersionUpdate","color","size","default","_withCtx","_","_createCommentVNode","defineComponent","components","IonButton","props","checkInterval","type","Number","setup","ref","auth","AuthService","setActiveVersion","value","location","reload","setInterval","async","headVersion","getHeadVersion","activeVersion","getActiveCoreVersion","__exports__"],"mappings":"2IAAA,W,2DCEA,MAAMA,EAAeC,IAAMC,yBAAa,mBAAmBD,EAAEA,IAAIE,0BAAcF,GACzEG,EAAa,CACjBC,IAAK,EACLC,GAAI,uBAEAC,EAA2BP,EAAa,IAAmBQ,gCAAoB,KAAM,KAAM,MAAO,IAClGC,EAA2BT,EAAa,IAAmBQ,gCAAoB,KAAM,KAAM,MAAO,IAElG,SAAUE,EAAOC,EAAUC,EAAYC,EAAYC,EAAYC,EAAWC,GAC9E,MAAMC,EAAwBC,8BAAkB,cAEhD,OAAQP,EAAKQ,WACRC,yBAAcC,gCAAoB,MAAOjB,EAAY,CACpDkB,6BAAiBC,6BAAiBZ,EAAKa,YAAc,IAAK,GAC1DjB,EACAe,6BAAiB,yCACjBb,EACAgB,yBAAaR,EAAuB,CAClCS,QAASf,EAAKgB,gBACdC,MAAO,UACPC,KAAM,SACL,CACDC,QAASC,qBAAS,IAAM,CACtBT,6BAAiB,oBAEnBU,EAAG,GACF,EAAG,CAAC,eAETC,gCAAoB,IAAI,G,4BCzBfC,+BAAgB,CAC3BC,WAAY,CAAEC,0BACdC,MAAO,CACHC,cAAe,CACXC,KAAMC,OACNV,QAAS,MAGjBW,MAAMJ,GACF,MAAMlB,EAAYuB,kBAAI,GAChBlB,EAAakB,iBAAI,IACjBC,EAAO,IAAIC,OAajB,SAASjB,IACLgB,EAAKE,iBAAiBrB,EAAWsB,OACjCC,SAASC,SAGb,OAhBAC,YAAYC,UACR,IAAK/B,EAAU2B,MAAO,CAClB,MAAMK,QAAoBR,EAAKS,iBACzBC,EAAgBV,EAAKW,uBACR,KAAfH,GAAsBA,GAAeE,IACrC7B,EAAWsB,MAAQK,EACnBhC,EAAU2B,OAAQ,KAG3BT,EAAMC,eAOF,CACHX,kBACAH,aACAL,gB,iCC9BZ,MAAMoC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAAS7C,GAAQ,CAAC,YAAY,qBAE1E","file":"js/chunk-1e82d964.f20f85ec.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UpdateNotification.vue?vue&type=style&index=0&id=502ec2d8&scoped=true&lang=css\"","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-502ec2d8\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = {\n  key: 0,\n  id: \"update-notification\"\n}\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ion_button = _resolveComponent(\"ion-button\")!\n\n  return (_ctx.hasUpdate)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createTextVNode(_toDisplayString(_ctx.newVersion) + \" \", 1),\n        _hoisted_2,\n        _createTextVNode(\" New Updates and fixes are available \"),\n        _hoisted_3,\n        _createVNode(_component_ion_button, {\n          onClick: _ctx.onVersionUpdate,\n          color: \"success\",\n          size: \"large\"\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(\" Update Now!! \")\n          ]),\n          _: 1\n        }, 8, [\"onClick\"])\n      ]))\n    : _createCommentVNode(\"\", true)\n}","\nimport { defineComponent, ref } from 'vue'\nimport { IonButton } from \"@ionic/vue\"\nimport { AuthService } from '@/services/auth_service'\n\nexport default defineComponent({\n    components: { IonButton },\n    props: {\n        checkInterval: {\n            type: Number,\n            default: 30000\n        }\n    },\n    setup(props) {\n        const hasUpdate = ref(false)\n        const newVersion = ref('')\n        const auth = new AuthService()\n\n        setInterval(async () => {\n            if (!hasUpdate.value) {\n                const headVersion = await auth.getHeadVersion()\n                const activeVersion = auth.getActiveCoreVersion()\n                if (headVersion != '-' && headVersion != activeVersion) {\n                    newVersion.value = headVersion\n                    hasUpdate.value = true\n                }\n            }\n        }, props.checkInterval)\n\n        function onVersionUpdate () {\n            auth.setActiveVersion(newVersion.value)\n            location.reload()\n        }\n\n        return {\n            onVersionUpdate,\n            newVersion,\n            hasUpdate\n        }\n    }\n})\n","import { render } from \"./UpdateNotification.vue?vue&type=template&id=502ec2d8&scoped=true&ts=true\"\nimport script from \"./UpdateNotification.vue?vue&type=script&lang=ts\"\nexport * from \"./UpdateNotification.vue?vue&type=script&lang=ts\"\n\nimport \"./UpdateNotification.vue?vue&type=style&index=0&id=502ec2d8&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/daniel/projects/malawi-emr/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-502ec2d8\"]])\n\nexport default __exports__"],"sourceRoot":""}