{"version":3,"sources":["webpack:///./src/apps/EMC/views/tools/PatientVisitStats.vue?f4fc","webpack:///./src/apps/EMC/views/tools/PatientVisitStats.vue","webpack:///./src/apps/EMC/views/tools/PatientVisitStats.vue?41a3","webpack:///./src/apps/EMC/utils/common.ts","webpack:///./src/apps/EMC/utils/exports.ts","webpack:///./src/apps/EMC/Components/tables/DrilldownTable.vue?d295","webpack:///./src/apps/EMC/Components/tables/DrilldownTable.vue","webpack:///./src/apps/EMC/Components/tables/DrilldownTable.vue?cb4d","webpack:///./src/apps/EMC/Components/inputs/DateRangePicker.vue?078a","webpack:///./src/apps/EMC/Components/inputs/DateRangePicker.vue?e220","webpack:///./src/apps/EMC/Components/inputs/DateRangePicker.vue","webpack:///./src/apps/EMC/Components/inputs/DateRangePicker.vue?b532","webpack:///./src/apps/EMC/Components/charts/LineChart.vue?7567","webpack:///./src/apps/EMC/Components/charts/LineChart.vue","webpack:///./src/apps/EMC/Components/charts/LineChart.vue?8c3f","webpack:///./src/utils/modal.ts"],"names":["_hoisted_1","style","_hoisted_2","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_date_range_picker","_resolveComponent","_component_ion_button","_component_ion_col","_component_ion_label","_component_ion_badge","_component_ion_item","_component_ion_list","_component_line_chart","_component_ion_row","_component_ion_grid","_openBlock","_createBlock","default","_withCtx","_createVNode","size","offset","_createElementVNode","modelValue","range","$event","color","onClick","fetchData","_createTextVNode","_","button","drilldown","totalAttendance","_toDisplayString","length","totalPatientVisits","totalGuardianVisits","series","options","onPointSelection","pointSelection","placeholder","defineComponent","components","LineChart","IonGrid","IonRow","IonCol","DateRangePicker","setup","router","useRouter","ref","computed","_series$value$","value","raw","flat","_series$value$2","map","title","text","align","yaxis","plotAreaHeight","buildSeries","data","patientPresent","guardianPresent","bothPresent","seriesData","name","Object","entries","forEach","date","patients","patientId","patient_present","guardian_present","push","ms","Date","getTime","async","loader","show","report","PatientReportService","setStartDate","start","setEndDate","end","getPatientVisitTypes","hide","resolvePatientDetails","Patientservice","findByID","p","getArvNumber","getBirthdate","getGender","getCurrentVillage","isEmpty","columns","path","label","initialSort","initialSortOrder","preSort","sortByARV","formatter","HisDate","toStandardHisDisplayFormat","toGenderString","rows","fillRows","patient","rowActionButtons","action","row","modal","DrilldownTableVue","dataPointIndex","sIndex","e","console","error","__exports__","arvNumber","parseInt","split","sanitize","str","replace","trim","getEncryptionHeader","password","Service","getUserName","encryption","userPassword","ownerPassword","userPermissions","isExportable","column","safeMode","exportable","getExportableHeadings","filter","getExportableRows","get","drillable","Array","isArray","toCsvString","opts","quarter","period","filters","exportableColumns","exportableRows","sortRows","sort","join","dayjs","format","getAppVersion","getApiVersion","getSiteUUID","exportToCSV","csvData","Blob","type","link","document","createElement","href","window","URL","createObjectURL","setAttribute","filename","body","appendChild","click","removeChild","exportToPDF","canHorizontalPageBreak","tableColumns","tableRows","doc","jsPDF","splitTextToSize","tableMarginStartY","config","startY","head","tableWidth","horizontalPageBreak","horizontalPageBreakRepeat","autoTable","save","_component_IonIcon","_component_IonButton","_component_IonButtons","_component_IonTitle","_component_IonToolbar","_component_IonHeader","_component_data_table","_component_IonContent","_component_IonPage","slot","icon","close","asyncRows","actionBtns","DataTable","IonButton","IonPage","IonHeader","IonContent","IonToolbar","IonButtons","IonTitle","IonIcon","props","String","Function","actionButtons","canExportCsv","Boolean","btns","_a","includes","substring","_hoisted_3","_component_ion_icon","_component_date_picker","masks","popover","inputValue","inputEvents","_mergeProps","_toHandlers","arrowForward","DatePicker","emits","emit","input","visibility","set","toStandardHisFormat","_component_apex_chart","_component_ion_card_content","_component_ion_card","width","height","chartOptions","onMarkerClick","Number","IonCard","IonCardContent","ApexChart","defaults","chart","id","xaxis","tickAmount","labels","rotate","markers","hover","sizeOffset","tooltip","x","noData","verticalAlign","offsetX","offsetY","fontSize","fontFamily","key","c","seriesIndex","log","component","componentProps","cssClass","backdropDismiss","m","modalController","create","present","onWillDismiss","dismiss"],"mappings":"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","file":"js/chunk-216f6210.714f9de1.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { style: {\"display\":\"flex\",\"justify-content\":\"flex-start\"} }\nconst _hoisted_2 = { class: \"his-card\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_date_range_picker = _resolveComponent(\"date-range-picker\")!\n  const _component_ion_button = _resolveComponent(\"ion-button\")!\n  const _component_ion_col = _resolveComponent(\"ion-col\")!\n  const _component_ion_label = _resolveComponent(\"ion-label\")!\n  const _component_ion_badge = _resolveComponent(\"ion-badge\")!\n  const _component_ion_item = _resolveComponent(\"ion-item\")!\n  const _component_ion_list = _resolveComponent(\"ion-list\")!\n  const _component_line_chart = _resolveComponent(\"line-chart\")!\n  const _component_ion_row = _resolveComponent(\"ion-row\")!\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")!\n\n  return (_openBlock(), _createBlock(_component_ion_grid, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_ion_row, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_ion_col, {\n            size: \"3\",\n            offset: \"9\",\n            class: \"ion-padding\"\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_1, [\n                _createVNode(_component_date_range_picker, {\n                  modelValue: _ctx.range,\n                  \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.range) = $event)),\n                  class: \"ion-margin-end\",\n                  style: {\"padding\":\"5px\"}\n                }, null, 8, [\"modelValue\"]),\n                _createVNode(_component_ion_button, {\n                  color: \"primary\",\n                  onClick: _ctx.fetchData,\n                  style: {\"height\":\"44px\"}\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(\"Submit\")\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\"])\n              ])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_ion_col, {\n            size: \"2\",\n            class: \"ion-padding-top\"\n          }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_2, [\n                _createVNode(_component_ion_list, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_item, {\n                      button: \"\",\n                      onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.drilldown(_ctx.totalAttendance, 'Total Attendance')))\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_label, null, {\n                          default: _withCtx(() => [\n                            _createTextVNode(\" Total Attendance \")\n                          ]),\n                          _: 1\n                        }),\n                        _createVNode(_component_ion_badge, null, {\n                          default: _withCtx(() => [\n                            _createTextVNode(_toDisplayString(_ctx.totalAttendance.length), 1)\n                          ]),\n                          _: 1\n                        })\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_ion_item, {\n                      button: \"\",\n                      onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.drilldown(_ctx.totalPatientVisits, 'Total patient visits')))\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_label, null, {\n                          default: _withCtx(() => [\n                            _createTextVNode(\" Patient Visit \")\n                          ]),\n                          _: 1\n                        }),\n                        _createVNode(_component_ion_badge, null, {\n                          default: _withCtx(() => [\n                            _createTextVNode(_toDisplayString(_ctx.totalPatientVisits.length), 1)\n                          ]),\n                          _: 1\n                        })\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_ion_item, {\n                      button: \"\",\n                      onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.drilldown(_ctx.totalGuardianVisits, 'Total guardian visits')))\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_ion_label, null, {\n                          default: _withCtx(() => [\n                            _createTextVNode(\" Guardian Visit \")\n                          ]),\n                          _: 1\n                        }),\n                        _createVNode(_component_ion_badge, null, {\n                          default: _withCtx(() => [\n                            _createTextVNode(_toDisplayString(_ctx.totalGuardianVisits.length), 1)\n                          ]),\n                          _: 1\n                        })\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_ion_col, { size: \"10\" }, {\n            default: _withCtx(() => [\n              _createVNode(_component_line_chart, {\n                series: _ctx.series,\n                options: _ctx.options,\n                onPointSelection: _ctx.pointSelection,\n                placeholder: \"select date period\"\n              }, null, 8, [\"series\", \"options\", \"onPointSelection\"])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","\nimport { computed, defineComponent, ref } from \"vue\";\nimport LineChart from \"@/apps/EMC/Components/charts/LineChart.vue\";\nimport { IonGrid, IonRow, IonCol } from \"@ionic/vue\";\nimport { isEmpty } from \"lodash\";\nimport DateRangePicker, { DateRange } from \"@/apps/EMC/Components/inputs/DateRangePicker.vue\";\nimport { PatientReportService } from \"@/apps/ART/services/reports/patient_report_service\";\nimport { loader } from \"@/utils/loader\";\nimport { RowActionButtonInterface, TableColumnInterface } from \"@uniquedj95/vtable\";\nimport { Patientservice } from \"@/services/patient_service\";\nimport { modal } from \"@/utils/modal\";\nimport DrilldownTableVue from \"../../Components/tables/DrilldownTable.vue\";\nimport { useRouter } from \"vue-router\";\nimport HisDate from \"@/utils/Date\";\nimport { toGenderString } from \"@/utils/Strs\";\nimport { sortByARV } from \"../../utils/common\";\n\nexport default defineComponent({\n  components: {\n    LineChart,\n    IonGrid,\n    IonRow,\n    IonCol,\n    DateRangePicker,\n  },\n  setup() {\n    const router = useRouter();\n    const range = ref({} as DateRange);\n    type PointData = { patientId: number, date: string }\n    type SeriesData = { name: string; raw: PointData[][], data: number[][] }\n    const series = ref([] as SeriesData[]);\n    const totalPatientVisits = computed(() => series.value[0]?.raw.flat() || []);\n    const totalGuardianVisits = computed(() => series.value[1]?.raw.flat() || []);\n    const totalAttendance = computed(() => series.value.map(({ raw }) => raw).flat(3))\n\n    const options = {\n      title: {\n        text: \"Patient Vists Statistics\",\n        align: \"left\",\n      },\n      yaxis: {\n        title: { \n          text: \"Number of clients\"\n        },\n        plotAreaHeight: 800,\n      },\n    }\n\n    const buildSeries = (data: any) => {\n      const patientPresent: Record<string, Array<PointData>> = {};\n      const guardianPresent: Record<string, Array<PointData>> = {};\n      const bothPresent: Record<string, Array<PointData>> = {};\n      const seriesData: Array<SeriesData> = [\n        { name: 'Patient present', raw: [], data: []},\n        { name: 'Guardian present', raw: [], data: []},\n        { name: 'Both patient and guardian present', raw: [], data: []}\n      ]\n\n      Object.entries(data).forEach(([date, patients]: any) => {\n        patientPresent[date] = []\n        guardianPresent[date] = []\n        bothPresent[date] = []\n        Object.entries(patients).forEach(([patientId, {patient_present, guardian_present}]: any) => {\n          if (guardian_present && patient_present) bothPresent[date].push({patientId, date})\n          else if (patient_present) patientPresent[date].push({patientId, date})\n          else if (guardian_present) guardianPresent[date].push({patientId, date})\n        })\n        const ms = new Date(date).getTime();\n        seriesData[0].data.push([ms, patientPresent[date].length])\n        seriesData[0].raw.push(patientPresent[date])\n        seriesData[1].data.push([ms, guardianPresent[date].length])\n        seriesData[1].raw.push(guardianPresent[date])\n        seriesData[2].data.push([ms, bothPresent[date].length])\n        seriesData[2].raw.push(bothPresent[date])\n      })\n\n      return seriesData\n    }\n\n    const fetchData = async () => {\n      loader.show();\n      const report = new PatientReportService();\n      report.setStartDate(range.value.start);\n      report.setEndDate(range.value.end);\n      const data = await report.getPatientVisitTypes();\n      series.value = buildSeries(data);\n      loader.hide();\n    }\n\n    const resolvePatientDetails = async (patientId: number) => {\n      const data = await Patientservice.findByID(patientId)\n      const p = new Patientservice(data)\n      return {\n        \"arv_number\": p.getArvNumber(),\n        \"birthdate\": p.getBirthdate(),\n        \"gender\": p.getGender(),\n        \"address\": `${p.getCurrentVillage()}`,\n        ...data,\n      }\n    }\n\n    const drilldown = async (patients: PointData[], title= \"Drill down clients\") => {\n      if(isEmpty(patients)) return\n      const columns: TableColumnInterface[] = [\n        { path: \"arv_number\", label: \"ARV Number\", initialSort: true, initialSortOrder: 'asc', preSort: sortByARV },\n        { path: \"birthdate\", label: \"Date of Birth\", formatter: HisDate.toStandardHisDisplayFormat },\n        { path: \"gender\", label: \"Gender\", formatter: toGenderString },\n        { path: \"date\", label: \"Visit Date\", formatter: HisDate.toStandardHisDisplayFormat },\n        { path: \"address\", label: \"Address\" }\n      ]\n      const rows = ref<any[]>([])\n      const fillRows = async () => {\n        for (const { patientId, date } of patients) {\n          const patient = await resolvePatientDetails(patientId)\n          rows.value.push({...patient, date})\n        }\n      }\n      fillRows();\n      const rowActionButtons: RowActionButtonInterface[] = [{ \n        label: \"Select\",\n        action: (row: any) => router.push(`/emc/patient/${row['patient_id']}`)\n      }]\n\n      await modal.show(DrilldownTableVue, {\n        title,\n        columns,\n        rows: rows.value,\n        rowActionButtons,\n      })\n    }\n\n    const pointSelection = async (dataPointIndex: number, sIndex: number) => {\n      if(isEmpty(series.value)) return \n      try {\n        await drilldown(series.value[sIndex].raw[dataPointIndex], `${series.value[sIndex].name} visits`)\n      } catch (e) {\n        console.error(e)\n      }\n    }\n\n    return {\n      range,\n      series,\n      options,\n      totalAttendance,\n      totalPatientVisits,\n      totalGuardianVisits,\n      fetchData,\n      pointSelection,\n      drilldown,\n    };\n  },\n});\n","import { render } from \"./PatientVisitStats.vue?vue&type=template&id=162c9415&ts=true\"\nimport script from \"./PatientVisitStats.vue?vue&type=script&lang=ts\"\nexport * from \"./PatientVisitStats.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/projects/malawi-emr/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export function sortByARV(arvNumber: string) {\n  return parseInt(arvNumber.split(\"-\")[2]) || 0\n}","import { \n  sortRows, \n  TableColumnInterface, \n  TableFilterInterface, \n} from '@uniquedj95/vtable';\nimport { get } from 'lodash';\nimport { Service } from '@/services/service';\nimport dayjs from 'dayjs';\nimport jsPDF, { EncryptionOptions } from 'jspdf';\nimport autoTable from 'jspdf-autotable';\n\nexport function sanitize(str: string) {\n  try {\n    return str.replace(/<(?:.|\\n)*?>/gm, \" \")\n      .replace(/(\\r\\n|\\n|\\r)/gm, '')\n      .replace(/\\n/g, \" \")\n      .replace(/\\t/g, \" \")\n      .replace(/\\s{2,}/g, \" \")\n      .replace(/=/g, \" \")\n      .replace(/,/g, \" \")\n      .trim();\n  } catch (error) {\n    return str;\n  }\n}\n\ninterface ExportOptions {\n  columns: TableColumnInterface[];\n  rows: any[];\n  filename: string;\n  quarter?: string;\n  period?: string;\n  filters?: TableFilterInterface;\n  canHorizontalPageBreak?: boolean;\n  safeMode?: boolean;\n}\n\nfunction getEncryptionHeader(): Record<\"encryption\", EncryptionOptions> {\n  const password = Service.getUserName()\n  return {\n    encryption: {\n      userPassword: password,\n      ownerPassword: password,\n      userPermissions: [\"print\"]\n    }\n  }\n}\n\nfunction isExportable(column: TableColumnInterface, safeMode: boolean) {\n  return safeMode || column.exportable !== false;\n}\n\nfunction getExportableHeadings(columns: Array<TableColumnInterface>, safeMode = false) {\n  return columns.filter(column => isExportable(column, safeMode)).map(column => column.label);\n}\n\nfunction getExportableRows(columns: Array<TableColumnInterface>, rows: Array<any>, safeMode = false){\n  return rows.map(row => {\n    return columns.filter(column => isExportable(column, safeMode))\n      .map(column => {\n        let value = get(row, column.path);\n        if (typeof column.formatter === 'function' && value) value = column.formatter(value, row)\n        return sanitize(column.drillable && Array.isArray(value) ? value.length : value);\n      })\n  })\n}\n\nfunction toCsvString(opts: ExportOptions) {\n  const { columns, rows, quarter, period, filters, safeMode } = opts;\n  const exportableColumns = getExportableHeadings(columns, safeMode);\n  const exportableRows = getExportableRows(columns, sortRows(rows, filters?.sort || []), safeMode);\n  let str = exportableColumns.join(\",\") + \"\\n\"\n  str += exportableRows.map(row => row.join(\",\")).join(\"\\n\");\n  str += \"\\n\" + `Date Created:  ${dayjs().format('DD/MMM/YYYY HH:MM:ss')}`;\n  if (quarter) str += \"\\n\" + `Quarter: ${quarter}`;\n  if (period) str += \"\\n\" + `Quarter: ${period}`;\n  str += \"\\n\" + `e-Mastercard Version : ${Service.getAppVersion()}`;\n  str += \"\\n\" + `API Version ${Service.getApiVersion()}`;\n  str += \"\\n\" + `Site UUID: ${Service.getSiteUUID()}`;\n  return str;\n}\n\nexport function exportToCSV(opts: ExportOptions) {\n  const csvData = new Blob([toCsvString(opts)], { type: \"text/csv;charset=utf-8;\" });\n  const link = document.createElement(\"a\");\n  link.href = window.URL.createObjectURL(csvData);\n\n\n\n  link.setAttribute(\"download\", `${opts.filename}.csv`);\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n\nexport function exportToPDF(opts: ExportOptions) {\n  const {filename, canHorizontalPageBreak, columns, rows, filters, safeMode } = opts\n  const tableColumns: Array<Array<string>> = [ getExportableHeadings(columns, safeMode) ];\n  const tableRows: Array<Array<string>> = getExportableRows(columns, sortRows(rows, filters?.sort || []), safeMode);\n  const encryption = safeMode ? getEncryptionHeader() : {};\n  const doc = new jsPDF({...encryption})\n  const title = doc.splitTextToSize(sanitize(filename), 180)\n  const tableMarginStartY = title.length <= 1 ? 20 : title.length * 10\n  doc.text(title, 14, 10)\n  const config: any = {\n    startY: tableMarginStartY,\n    head: tableColumns,\n    body: tableRows\n  }\n  if (canHorizontalPageBreak) {\n    config.tableWidth = 'wrap'\n    config.horizontalPageBreak = true\n    config.horizontalPageBreakRepeat = 0\n  }\n  autoTable(doc, config)\n  const path = `${filename}.pdf`\n  doc.save(path)\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_IonIcon = _resolveComponent(\"IonIcon\")!\n  const _component_IonButton = _resolveComponent(\"IonButton\")!\n  const _component_IonButtons = _resolveComponent(\"IonButtons\")!\n  const _component_IonTitle = _resolveComponent(\"IonTitle\")!\n  const _component_IonToolbar = _resolveComponent(\"IonToolbar\")!\n  const _component_IonHeader = _resolveComponent(\"IonHeader\")!\n  const _component_data_table = _resolveComponent(\"data-table\")!\n  const _component_IonContent = _resolveComponent(\"IonContent\")!\n  const _component_IonPage = _resolveComponent(\"IonPage\")!\n\n  return (_openBlock(), _createBlock(_component_IonPage, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_IonHeader, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_IonToolbar, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_IonButtons, { slot: \"end\" }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_IonButton, {\n                    slot: \"end\",\n                    onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.modal.hide())),\n                    \"icon-only\": \"\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_IonIcon, { icon: _ctx.close }, null, 8, [\"icon\"])\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_IonTitle, null, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(_ctx.title), 1)\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_IonContent, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_data_table, {\n            rows: _ctx.rows,\n            \"async-rows\": _ctx.asyncRows,\n            columns: _ctx.columns,\n            \"row-actions-buttons\": _ctx.rowActionButtons,\n            \"actions-buttons\": _ctx.actionBtns,\n            color: \"custom\"\n          }, null, 8, [\"rows\", \"async-rows\", \"columns\", \"row-actions-buttons\", \"actions-buttons\"])\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","\nimport { computed, defineComponent, PropType } from \"vue\";\nimport { IonButton, IonPage, IonHeader, IonToolbar, IonContent, IonButtons, IonTitle, IonIcon } from \"@ionic/vue\";\nimport { DataTable, ActionButtonInterface, TableColumnInterface, RowActionButtonInterface } from \"@uniquedj95/vtable\";\nimport { close } from \"ionicons/icons\";\nimport { modal } from \"@/utils/modal\";\nimport dayjs from \"dayjs\";\nimport { exportToCSV } from \"../../utils/exports\";\n\nexport default defineComponent({\n  name: \"DrilldownTable\",\n  components: {\n    DataTable,\n    IonButton,\n    IonPage,\n    IonHeader,\n    IonContent,\n    IonToolbar,\n    IonButtons,\n    IonTitle,\n    IonIcon,\n  },\n  props: {\n    title: {\n      type: String,\n      default: \"Report\",\n    },\n    rows: {\n      type: Array as PropType<any[]>,\n      default: () => [],\n    },\n    asyncRows: {\n      type: Function as PropType<() => Promise<any[]>>,\n    },\n    columns: {\n      type: Array as PropType<TableColumnInterface[]>,\n      default: () => [],\n    },\n    rowActionButtons: {\n      type: Array as PropType<RowActionButtonInterface[]>,\n      default: () => [],\n    },\n    actionButtons: {\n      type: Array as PropType<ActionButtonInterface[]>,\n      default: () => [],\n    },\n    canExportCsv: {\n      type: Boolean,\n      default: true,\n    },\n    period: {\n      type: String,\n      default: \"\",\n    },\n  },\n  setup(props){\n    const actionBtns = computed<ActionButtonInterface[]>(() => {\n      const btns = [...props.actionButtons];\n      if (props.canExportCsv) {\n        btns.push({\n          label: \"CSV\",\n          color: \"primary\",\n          action: async (_a, rows, filters, columns) => exportToCSV({\n            rows, \n            filters,\n            columns, \n            period: props.period.includes('Custom') ? props.period.substring(6) : props.period,\n            filename: `${props.title}-${dayjs().format('DD-MMM-YYYY')}`\n          })\n        })\n      }\n      return btns;\n    })\n\n    return {\n      close,\n      modal,\n      actionBtns,\n    }\n  }\n})\n","import { render } from \"./DrilldownTable.vue?vue&type=template&id=63bf706e&ts=true\"\nimport script from \"./DrilldownTable.vue?vue&type=script&lang=ts\"\nexport * from \"./DrilldownTable.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/projects/malawi-emr/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DateRangePicker.vue?vue&type=style&index=0&id=4991088d&scoped=true&lang=css\"","import { toHandlers as _toHandlers, mergeProps as _mergeProps, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4991088d\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"date-picker-wrapper\" }\nconst _hoisted_2 = [\"value\"]\nconst _hoisted_3 = [\"value\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_ion_icon = _resolveComponent(\"ion-icon\")!\n  const _component_date_picker = _resolveComponent(\"date-picker\")!\n\n  return (_openBlock(), _createBlock(_component_date_picker, {\n    modelValue: _ctx.range,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.range) = $event)),\n    \"is-range\": \"\",\n    masks: _ctx.masks,\n    popover: _ctx.popover\n  }, {\n    default: _withCtx(({ inputValue, inputEvents }) => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createElementVNode(\"input\", _mergeProps({\n          value: inputValue.start,\n          class: \"box date-picker-input\"\n        }, _toHandlers(inputEvents.start, true), { placeholder: \"DD/MMM/YYYY\" }), null, 16, _hoisted_2),\n        _createVNode(_component_ion_icon, {\n          icon: _ctx.arrowForward,\n          class: \"date-picker-icon\"\n        }, null, 8, [\"icon\"]),\n        _createElementVNode(\"input\", _mergeProps({\n          value: inputValue.end,\n          class: \"box date-picker-input\"\n        }, _toHandlers(inputEvents.start, true), { placeholder: \"DD/MMM/YYYY\" }), null, 16, _hoisted_3)\n      ])\n    ]),\n    _: 1\n  }, 8, [\"modelValue\", \"masks\", \"popover\"]))\n}","\nimport { computed, defineComponent, PropType, ref } from \"vue\";\nimport { IonIcon } from \"@ionic/vue\";\nimport { arrowForward } from \"ionicons/icons\";\nimport { DatePicker } from \"v-calendar\";\nimport Date from \"@/utils/Date\";\n\nexport interface DateRange {\n  start: string;\n  end: string;\n}\n\nexport default defineComponent({\n  name: \"DateRangePicker\",\n  components: {\n    IonIcon,\n    DatePicker,\n  },\n  props: {\n    modelValue: {\n      type: Object as PropType<DateRange>,\n      default: () => ({ start: \"\", end: \"\" }),\n    }\n  },\n  emits: [\"update:modelValue\"],\n  setup (props, { emit }) {\n    const masks = ref({ input: \"DD/MMM/YYYY\" });\n    const popover = ref({ visibility: 'click' });\n    \n    const range = computed({\n      get: () => props.modelValue,\n      set: ({start, end}: DateRange) => emit(\"update:modelValue\", {\n        start: Date.toStandardHisFormat(start),\n        end: Date.toStandardHisFormat(end)\n      })\n    })\n\n    return {\n      arrowForward,\n      range,\n      masks,\n      popover,\n    };\n  },\n})\n","import { render } from \"./DateRangePicker.vue?vue&type=template&id=4991088d&scoped=true&ts=true\"\nimport script from \"./DateRangePicker.vue?vue&type=script&lang=ts\"\nexport * from \"./DateRangePicker.vue?vue&type=script&lang=ts\"\n\nimport \"./DateRangePicker.vue?vue&type=style&index=0&id=4991088d&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/daniel/projects/malawi-emr/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4991088d\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_apex_chart = _resolveComponent(\"apex-chart\")!\n  const _component_ion_card_content = _resolveComponent(\"ion-card-content\")!\n  const _component_ion_card = _resolveComponent(\"ion-card\")!\n\n  return (_openBlock(), _createBlock(_component_ion_card, {\n    class: \"his-card\",\n    style: {\"height\":\"100%\"}\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_ion_card_content, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_apex_chart, {\n            width: \"100%\",\n            height: _ctx.height,\n            type: \"line\",\n            options: _ctx.chartOptions,\n            series: _ctx.series,\n            onMarkerClick: _ctx.onPointSelection\n          }, null, 8, [\"height\", \"options\", \"series\", \"onMarkerClick\"])\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","\nimport { computed, defineComponent, PropType } from \"vue\";\nimport { IonCard, IonCardContent } from \"@ionic/vue\";\nimport ApexChart from \"vue3-apexcharts\"\n\nexport default defineComponent({\n  name: \"LineChart\",\n  props: {\n    series: {\n      type: Array as PropType<any[]>,\n      default: () => []\n    },\n    options: {\n      type: Object as PropType<Record<string, any>>,\n      default: () => ({})\n    },\n    height: {\n      type: [String, Number],\n      default: 560\n    },\n    placeholder: {\n      type: String,\n      default: \"Loading data...\"\n    }\n  },\n  components: { IonCard, IonCardContent, ApexChart },\n  emits: [\"pointSelection\"],\n  setup(props, { emit }) {\n    const chartOptions = computed(() => {\n      const defaults: Record<string, any> = {\n        chart: {\n          id: \"line-chart\",\n          type: 'line',\n        },\n        xaxis: {\n          type: 'datetime',\n          tickAmount: 2,\n          labels: {\n            show: true,\n            rotate: -75,\n          }\n        },\n        markers: {\n          size: 8,\n          hover: {\n            sizeOffset: 3\n          }\n        },\n        tooltip: {\n          x: {\n            format: 'dd/MMM/yyyy'\n          }\n        },\n        title: {\n          text: 'Line Chart',\n          align: 'left'\n        },\n        noData: {\n          text: props.placeholder,\n          align: \"center\",\n          verticalAlign: \"middle\",\n          offsetX: 0,\n          offsetY: 0,\n          style: {\n            color: \"#a7a7a7\",\n            fontSize: \"25px\",\n            fontFamily: \"Helvetica\",\n          },\n        },\n      }\n\n      for (const key in props.options) {\n        defaults[key] = { ...defaults[key], ...props.options[key] };\n      }\n      \n      return defaults;\n    });\n\n    const onPointSelection = (e: any, c: any, { dataPointIndex, seriesIndex }: any) => {\n      console.log(e, c)\n      emit(\"pointSelection\", dataPointIndex, seriesIndex <= 0 ? 0 : seriesIndex)\n    }\n    return {\n      chartOptions,\n      onPointSelection,\n    };\n  },\n});\n","import { render } from \"./LineChart.vue?vue&type=template&id=ead7d7b6&ts=true\"\nimport script from \"./LineChart.vue?vue&type=script&lang=ts\"\nexport * from \"./LineChart.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/projects/malawi-emr/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { modalController } from \"@ionic/vue\";\n\nexport const modal = {\n  async show(component: any, componentProps?: Record<string, any>, cssClass = 'custom-modal', backdropDismiss = true) {\n    const m = await modalController.create({\n      component,\n      cssClass,\n      backdropDismiss,\n      componentProps,\n    });\n    m.present();\n    const { data } = await m.onWillDismiss();\n    if(data) return data;\n  },\n  async hide(data?: Record<string, any>) {\n    await modalController.dismiss(data);\n  }\n}"],"sourceRoot":""}